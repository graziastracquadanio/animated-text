angular.module("animate-text",[]).directive("animatedText",function(){return{restrict:"E",link:function(scope,element,attrs){var words=element.text().split(" "),html="";html+='<div class="animated-letters-container '+attrs.container+'">';{var max_width=element.parent()[0].offsetWidth;Math.round(max_width/element.text().replace(/\s+/g,"").split("").length)}angular.forEach(words,function(word){html+='<div class="f-word">',angular.forEach(word.split(""),function(letter){letter=letter.toUpperCase();var random=Math.floor(4*Math.random()+1);switch(random){case 1:direction="up";break;case 2:direction="right";break;case 3:direction="down";break;case 4:direction="left"}switch(letter){case";":case":":case".":case"*":case"&":case"@":case",":case"!":case"'":case"?":direction="right"}var single='<div class="f-letter"><span>'+letter+'</span><div class="inner '+direction+'"><div class="first">'+letter+'</div><div class="second">'+letter+"</div></div></div>";html+=single}),html+="</div>"}),html+="</div>",element.html(html);var animateLetter=function(letterElement){letterElement.hasClass("animate")||(letterElement.addClass("animate"),setTimeout(function(){letterElement.removeClass("animate")},3e3))},animateRandomLetter=function(){var randomWord=Math.floor(Math.random()*words.length+1)-1,randomLetter=Math.floor(Math.random()*words[randomWord].length+1)-1,wordElement=element.children().eq(0).children().eq(randomWord),letterElement=wordElement.children().eq(randomLetter).children().eq(1);setTimeout(function(){animateLetter(letterElement)},1e3*Math.floor(4*Math.random()+1))},letters=element.children().children().children().children();letters.on("mouseover",function(event){var target=angular.element(event.currentTarget);animateLetter(target)}),window.setInterval(function(){animateRandomLetter(),animateRandomLetter()},3e3)}}});